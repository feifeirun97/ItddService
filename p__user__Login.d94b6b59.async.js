(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[531],{34687:function(D){D.exports={container11:"container11___3S3Qb",content:"content___2zk1-",welcomeText:"welcomeText___2eR1W",timeText:"timeText___1ifaH",lang:"lang___l6cji"}},89218:function(D,P,e){"use strict";e.r(P),e.d(P,{default:function(){return V}});var _=e(34792),E=e(48086),F=e(11849),M=e(3182),C=e(2824),ee=e(17462),H=e(94043),g=e.n(H),R=e(89366),$=e(2603),y=e(67294),z=e(43504),T=e(5966),s=e(21010),ae=e(73631),te=e(5029);function ne(h,n){return w.apply(this,arguments)}function w(){return w=_asyncToGenerator(_regeneratorRuntime.mark(function h(n,c){return _regeneratorRuntime.wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.abrupt("return",request("/api/login/captcha",_objectSpread({method:"GET",params:_objectSpread({},n)},c||{})));case 1:case"end":return d.stop()}},h)})),w.apply(this,arguments)}var S=e(81354),G=function(n){var c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:S.enc.Utf8.parse("430225216d7945f3b9407381399d4003"),f=arguments.length>2&&arguments[2]!==void 0?arguments[2]:S.mode.ECB,d=arguments.length>3&&arguments[3]!==void 0?arguments[3]:S.pad.Pkcs7,j=n;if(typeof n=="object")j=JSON.stringify(n);else if(typeof n!="string")return null;var Z=S.AES.encrypt(j,c,{mode:f,padding:d}),L=Z.toString();return L},l=e(89244),k=e(34687),p=e.n(k),m=e(11768),a=e(85893),se=function(n){var c=n.content;return _jsx(_Alert,{style:{position:"absolute",top:"10px"},message:c,type:"error",showIcon:!0})},J=function(){var n=(0,y.useState)({}),c=(0,C.Z)(n,2),f=c[0],d=c[1],j=(0,y.useState)("account"),Z=(0,C.Z)(j,2),L=Z[0],re=Z[1],X=(0,y.useState)(new Date().valueOf()),O=(0,C.Z)(X,2),N=O[0],U=O[1],B=(0,s.tT)("@@initialState"),ie=B.initialState,Q=B.setInitialState,x=(0,s.YB)();(0,y.useEffect)(function(){window.top.location.pathname==="/user/login"&&(console.log("yes"),m.ZP.remove(l.Z.appId+"_token"),m.ZP.remove(l.Z.appId+"_userId"),m.ZP.remove(l.Z.appId+"_account"))},[N]);var W=function(){var v=(0,M.Z)(g().mark(function r(){var o;return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return o={name:"Serati Ma",avatar:"https://gw.alipayobjects.com/zos/antfincdn/XAosXuNZyF/BiazfanxmamNRoxxVxka.png",userid:"00000001",email:"antdesign@alipay.com",signature:"\u6D77\u7EB3\u767E\u5DDD\uFF0C\u6709\u5BB9\u4E43\u5927",title:"\u4EA4\u4E92\u4E13\u5BB6",group:"\u8682\u8681\u91D1\u670D\uFF0D\u67D0\u67D0\u67D0\u4E8B\u4E1A\u7FA4\uFF0D\u67D0\u67D0\u5E73\u53F0\u90E8\uFF0D\u67D0\u67D0\u6280\u672F\u90E8\uFF0DUED",tags:[],notifyCount:12,unreadCount:11,country:"China",access:"user",geographic:{},address:"",phone:""},t.next=3,Q(function(I){return(0,F.Z)((0,F.Z)({},I),{},{currentUser:o})});case 3:case"end":return t.stop()}},r)}));return function(){return v.apply(this,arguments)}}(),Y=function(){var v=(0,M.Z)(g().mark(function r(o){var u,t,I,A,b;return g().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,fetch("".concat(l.Z.api,"service-postInvestment/login"),{method:"POST",headers:{"Content-Type":"application/json",seqNo:new Date().valueOf(),appid:l.Z.appId},body:G({loginName:o.username,password:o.password,uuid:N,CODE:o.verification})}).then(function(q){return q.json()});case 2:if(u=i.sent,t={status:u.respCode,respMsg:u.respMsg,type:"account"},console.log(u),t.status!=="0000"){i.next=21;break}return I=x.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),E.default.success(I),m.ZP.save(l.Z.appId+"_token",u.data.token),m.ZP.save(l.Z.appId+"_userId",u.data.userId),m.ZP.save(l.Z.appId+"_account",u.data.account),i.next=13,W();case 13:if(s.m8){i.next=15;break}return i.abrupt("return");case 15:return A=s.m8.location.query,b=A.redirect,s.m8.push("/user/projList"),i.abrupt("return");case 21:E.default.error(t.respMsg),U(new Date().valueOf());case 23:console.log(t),d(t);case 25:case"end":return i.stop()}},r)}));return function(o){return v.apply(this,arguments)}}(),oe=f.status,ue=f.type,le=f.respMSg,K=x.formatMessage({id:"pages.login.landing"});return(0,a.jsxs)("div",{className:p().container11,children:[(0,a.jsx)("div",{className:p().lang,"data-lang":!0,children:s.pD&&(0,a.jsx)(s.pD,{})}),(0,a.jsx)("img",{style:{width:"160px",margin:"0 auto",display:"block"},alt:"logo",src:"http://api.opm.dev.aitaigroup.com/InvestManagement/framework/static/maxval_highres.7018e226.png"}),(0,a.jsxs)("div",{className:p().content,children:[(0,a.jsx)("div",{className:p().welcomeText,children:K}),(0,a.jsx)("div",{className:p().timeText,children:JSON.stringify(new Date).split("T")[0].replace('"',"")}),(0,a.jsx)(z.Z,{initialValues:{autoLogin:!0},onFinish:function(){var v=(0,M.Z)(g().mark(function r(o){return g().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Y(o);case 2:case"end":return t.stop()}},r)}));return function(r){return v.apply(this,arguments)}}(),children:L==="account"&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(T.Z,{width:"240px",name:"username",fieldProps:{prefix:(0,a.jsx)(R.Z,{className:p().prefixIcon})},placeholder:x.formatMessage({id:"pages.login.username.placeholder"}),rules:[{required:!0,message:(0,a.jsx)(s._H,{id:"pages.login.username.required"})}]}),(0,a.jsx)(T.Z.Password,{width:"240px",name:"password",fieldProps:{prefix:(0,a.jsx)($.Z,{className:p().prefixIcon})},placeholder:x.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801"}),rules:[{required:!0,message:(0,a.jsx)(s._H,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]}),(0,a.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",width:240,height:32,marginTop:"-25px"},children:[(0,a.jsx)(T.Z,{width:"130px",name:"verification",placeholder:x.formatMessage({id:"pages.login.captcha.placeholder"}),rules:[{required:!0,message:(0,a.jsx)(s._H,{id:"pages.login.captcha.required"})}]}),(0,a.jsx)("img",{onClick:function(){var r=new Date().valueOf();U(r)},style:{width:"90px",height:"32px"},src:"http://api.opm.dev.aitaigroup.com/service-postInvestment/getCode?uuid=".concat(N),alt:"loading"})]})]})})]})]})},V=J},42480:function(){}}]);
